<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta name="generator" content="Hugo 0.26-DEV" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> | seanchann</title>

     
      
    
    
    
    
    

  <meta name="author" content="">

 
    <meta property="og:title" content="" />
<meta property="og:description" content="Title: jenkins-security Date: Category: ci-cd Tags: jenkins Author: Seanchann Zhou lang: cn
系统：CentOS7 &#43; docker 1.6 Jenkins: ver. 1.609.1
配置说明 jenkins的安全配置说明在主页面的Configure Global Security的菜单中。它的安全和访问控制主要是两部分：安全域和鉴权策略。
Security Realm配置 在这个配置中，包含了下列的子选项，我们一一进行分析和说明：
Delegate to servlet container 使用servlet container对用户授权。这个是有历史的，从1.163版本就支持了这个功能。它主要用于下面的情节： * 从1.164就开始使用jenkins，并且不想改变当前的状态。 * 你已经配置了servlet container的鉴权，并且希望jenkins直接使用它
Jenkins&rsquo;s own user database 使用jenkins自己的用户列表来授权。这个适合小型范围的配置当你并没有任何的用户数据库的时候，当有大量用户的时候，这种策略是不合适的。在这种策略下，如果允许任何人通过注册可以获取到jenkins的权限的话，可以勾上“Allow user to sign up”。这样非用户可以自己通过“sign up”来注册使用jenkins。如果不允许，那么此时想添加新的用户，只能由注已经注册用户通过Manage Jenkins&ndash;&gt; Manage Users进入User Database界面，来创建用户。
LDAP 顾名思义连接到你已经有的ldap服务器来配置
Unix user/group database 如果安装的机器是unix机器，可以使用unix的账户信息来登录到jenkins。
Authorization 配置 鉴权策略的话，也有几个子选项。
Anyone can do anything 任何人都可以在系统上进行任何的操作。不推荐的方式
Legacy mode 这种策略比较极端：admin用户拥有所有权限，其他用户只读。
Logged-in users can do anything 可登录的用户拥有所有操作的权限。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.ucatch.me/posts/ci-cd/jenkins-security/" />















 
    



 
    
     
     
    
    
    <link rel="canonical" href="https://blog.ucatch.me/posts/ci-cd/jenkins-security/">   <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABwlBMVEUAAAA/3MUK07UJ0rRk6NkC0rMAw5sAx6Ic1rs/3MYAlU0E0rQAhjMAyKIAiTkM07UJ07UAhC8m2L4o2L5O4Msn2L4AzKoAzq0128Mo2b8F0rQE0rMu2cAt2cAA0bI228MA0LAAy6kr2b8Q1LcF0rMH0rUAxp4t2b8c1ros2b8P1LcAzKsAzq4528Q02sIM07YAfyg93cUD0rMA0LEA0bFK4c0M1LcL07Uv2sEAzawY1rlJ4c0w2sEAzKkY1rqr+PQN07Yj170G0rQI07UF0bMt2cAF0rMC0bIL07UF0bMs2cAF0rMA0bIC0bIL07UF0rMA0bIA0bIA0bIO1LYr2b8N07Yp2L4F0rMF0rQJ07UA0bIC0bMA0bIH0rQK07UD0bMA0LAF0rMAyqYE0rMA0bIS1Lg228ID0bMM07YS1LcI07QL07UJ07UC0bMM07YG0rMS1Lc328IR1LcC0bIK07UM07Yo2L4P1LcL07UD0rMD0rMD0rMB0bIH0rQ23MMQ1LcD0rMN1LYB0LAJ0rQ33MMG0bMP1bgD0rMN07YH0rQH0rQ33MQF0rMD0rMN1LYo2L4F0rQG0rSA6tsA0bIB0bL////yxqscAAAAk3RSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgnDXAUItvZKBAi6+vpMuf3++wEIAQcEBFn5AgR9UwMEoQLD/AEH4AIdAzha+UMEAQcc9AM4CAFSA9IC+4AEAc8yAwIEBAHOMQOBBLfLMAnFlAJNsa0LAAAAAWJLR0SVCGB6gwAAAAd0SU1FB+EBBBI4BduZ4woAAAF5SURBVDjLY2CAAUYmZgcWRydnVhc2dg4GTMAJlOdydZvs7sHtiU0FSJ7Hy3uyz2RfP24XNl4OLPJ8Xv5A+YBAsAo0M2DyQZMnY1fBL+AgCJXHrkIoWDgEJo9NhUioaBhCHqoiXExcAqZAMkIqckrU5MkoKqSjZeAmyMbIxSIZAFIRMCVOOl4epkAmQSERrwKOJMXkySl4rEhVSkufHDAZtyMzlDPdJweiyiN7UyRLIHsKQj5wMnowSIar5ExJQcjn5qnmqyFHlzqKL7EoQPMlphUaaL7EcGSBZiGKLzFUZGgVFSP5ElNFCVPpFORwhAeVto4uWEGwUJk3alSAVXhIR+tB7ShHTi5QkOIzpUKqEmKCPpODgReaipSUyVWl0tW6GEkWGhRBk2tq6wzrsSVqqPaGRqOmZmMTXWwqwNpbTFvbzMwtsGUMoPb2DqOmTksxK2xZLyhgck1XtzVIuw22zNszeXJvH0i7rR1G9gVlf/v+CRMnWaPYDgA74gwO0j2znAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wMS0wNFQxODo1NjowNSswMTowME2yC4wAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDEtMDRUMTg6NTY6MDUrMDE6MDA877MwAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/lumen/bulmaswatch.min.css"> 
    <link rel="stylesheet" href="https://blog.ucatch.me/css/landing.css">   
    
    
</head>


<body>
    <header> <nav class="nav has-shadow">
<div class="nav-left">
    <a class="nav-item" href="https://blog.ucatch.me/">
        <img src="https://blog.ucatch.me/img/bulma.png" alt="Bulma logo">
    </a>
</div>

<div class="nav-center">
    

    <a class="nav-item" target="blank" href="https://github.com/seanchann">
        <span class="icon">
            <i class="fa fa-github"></i>
          </span>
    </a>
    
    
</div>



<span class="nav-toggle">
        <span></span>
<span></span>
<span></span>
</span>



<div class="nav-right nav-menu" itemscope itemtype="http://schema.org/SiteNavigationElement">
        
        
        <a itemprop="url" class="nav-item is-tab  is-active" href="https://blog.ucatch.me/posts/"><span itemprop="name">Posts</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="https://blog.ucatch.me/blog/"><span itemprop="name">bulma theme</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="https://blog.ucatch.me/"><span itemprop="name">Home</span></a>
        
</div>
</nav> </header>
    <main>

<div class="columns is-fullheight">
    <div class="column">
        <section class="hero is-default is-bold">
            <div class="hero-body">
                <div class="content container">
                   

<p>Title: jenkins-security
Date:
Category: ci-cd
Tags: jenkins
Author: Seanchann Zhou
lang: cn</p>

<p><strong>系统：CentOS7 + docker 1.6</strong>
<strong>Jenkins: ver. 1.609.1</strong></p>

<h2 id="配置说明">配置说明</h2>

<p>jenkins的安全配置说明在主页面的Configure Global Security的菜单中。它的安全和访问控制主要是两部分：安全域和鉴权策略。</p>

<h3 id="security-realm配置">Security Realm配置</h3>

<p>在这个配置中，包含了下列的子选项，我们一一进行分析和说明：</p>

<h4 id="delegate-to-servlet-container">Delegate to servlet container</h4>

<p>使用servlet container对用户授权。这个是有历史的，从1.163版本就支持了这个功能。它主要用于下面的情节：
* 从1.164就开始使用jenkins，并且不想改变当前的状态。
* 你已经配置了servlet container的鉴权，并且希望jenkins直接使用它</p>

<h4 id="jenkins-s-own-user-database">Jenkins&rsquo;s own user database</h4>

<p>使用jenkins自己的用户列表来授权。这个适合小型范围的配置当你并没有任何的用户数据库的时候，当有大量用户的时候，这种策略是不合适的。在这种策略下，如果允许任何人通过注册可以获取到jenkins的权限的话，可以勾上“Allow user to sign up”。这样非用户可以自己通过“sign up”来注册使用jenkins。如果不允许，那么此时想添加新的用户，只能由注已经注册用户通过Manage Jenkins&ndash;&gt; Manage Users进入User Database界面，来创建用户。</p>

<h4 id="ldap">LDAP</h4>

<p>顾名思义连接到你已经有的ldap服务器来配置</p>

<h4 id="unix-user-group-database">Unix user/group database</h4>

<p>如果安装的机器是unix机器，可以使用unix的账户信息来登录到jenkins。</p>

<h3 id="authorization-配置">Authorization 配置</h3>

<p>鉴权策略的话，也有几个子选项。</p>

<h4 id="anyone-can-do-anything">Anyone can do anything</h4>

<p>任何人都可以在系统上进行任何的操作。不推荐的方式</p>

<h4 id="legacy-mode">Legacy mode</h4>

<p>这种策略比较极端：admin用户拥有所有权限，其他用户只读。</p>

<h4 id="logged-in-users-can-do-anything">Logged-in users can do anything</h4>

<p>可登录的用户拥有所有操作的权限。</p>

<h4 id="matrix-based-security">Matrix-based security</h4>

<p>默认首次启动后，配置administrator用户，配置系统所有权限，再对其他用户配置相应的权限。可实现admin对所有用户的权限的集中管制</p>

<h4 id="project-based-matrix-authorization-strategy">Project-based Matrix Authorization Strategy</h4>

<p>这个是针对每个工程配置权限，上节描述的是针对整个系统的。此项针对每个用户在每个具体的project上的权限进行配置。</p>

<h3 id="matrix-based-security配置系统">Matrix-based security配置系统</h3>

<p>我们使用Matrix-base sercurity来配置我们的用户系统，对用户进行集中管理。</p>

<ul>
<li>勾选Enable Security</li>
<li>Security Realm选择“Jenkins’ own user” database，确保勾选了“Allow users to sign up”</li>
<li>Authorization选择“Matrix-based security”</li>
<li>save &amp;&amp; apply</li>
<li>随后“sign up”创建一个新的用户admin。</li>
<li>在“Matrix-based security”中为admin用户配置所有的权限</li>
</ul>

<h2 id="补充说明">补充说明</h2>

<h3 id="权限配置错误-导致无法登陆的问题">权限配置错误，导致无法登陆的问题</h3>

<ul>
<li>停止jenkins</li>
<li>修改$JENKINS_HOME目录下的congfig.xml</li>
<li>将标签<useSecurity>true</useSecurity>改为false</li>
<li>将标签<AuthorizationStrategy>以及<securityRealm>这两个标签删除</li>
<li>重新启动jenkins</li>
</ul>

                </div>
                <br>
            </div>
        </section>
    </div>
</div>
</main>
    <footer> 
  
<div class="hero-foot">
    <div class="container">
        <div class="tabs is-centered">
            <ul>
                This page was generated using this template
                <li> <a class="button button is-link" class="link" target="_blank" rel="noopener" href="https://jeblister.github.io/bulma/">Bulma</a></li>
                using 
                <li> <a class="button button is-link" target="_blank" rel="noopener" href="https://gohugo.io/">Hugo</a></li>
                and build by
                <strong>&nbsp;seanchann.zhou</strong>
                <li> <a class="icon" href="https://github.com/jeblister/bulma">
              
                    <i class="fa fa-github"></i>
                </a></li>
            </ul>
            
        </div>
    </div>
</div>
 
</footer>

    <script async type="text/javascript" src="https://blog.ucatch.me/js/bulma.js"></script>
    <script async type="text/javascript"  src="https://blog.ucatch.me/js/clipboard.min.js"></script>
    <script async type="text/javascript"  src="https://blog.ucatch.me/js/clip.js"></script>
</body>

</html>