<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta name="generator" content="Hugo 0.26-DEV" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Posts | seanchann</title>

     
      
    
    
    
      <meta name="robots" content="noindex">
    
    
    

  <meta name="author" content="">

 
    <meta property="og:title" content="Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://blog.ucatch.me/posts/" />



<meta property="og:updated_time" content="2017-07-31T08:49:41&#43;08:00"/>









 
    



 
    
     
     
    
    <link href="https://blog.ucatch.me/posts/index.xml" rel="alternate" type="application/rss+xml" title="seanchann" /> 
    
    <link rel="canonical" href="https://blog.ucatch.me/posts/">   <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABwlBMVEUAAAA/3MUK07UJ0rRk6NkC0rMAw5sAx6Ic1rs/3MYAlU0E0rQAhjMAyKIAiTkM07UJ07UAhC8m2L4o2L5O4Msn2L4AzKoAzq0128Mo2b8F0rQE0rMu2cAt2cAA0bI228MA0LAAy6kr2b8Q1LcF0rMH0rUAxp4t2b8c1ros2b8P1LcAzKsAzq4528Q02sIM07YAfyg93cUD0rMA0LEA0bFK4c0M1LcL07Uv2sEAzawY1rlJ4c0w2sEAzKkY1rqr+PQN07Yj170G0rQI07UF0bMt2cAF0rMC0bIL07UF0bMs2cAF0rMA0bIC0bIL07UF0rMA0bIA0bIA0bIO1LYr2b8N07Yp2L4F0rMF0rQJ07UA0bIC0bMA0bIH0rQK07UD0bMA0LAF0rMAyqYE0rMA0bIS1Lg228ID0bMM07YS1LcI07QL07UJ07UC0bMM07YG0rMS1Lc328IR1LcC0bIK07UM07Yo2L4P1LcL07UD0rMD0rMD0rMB0bIH0rQ23MMQ1LcD0rMN1LYB0LAJ0rQ33MMG0bMP1bgD0rMN07YH0rQH0rQ33MQF0rMD0rMN1LYo2L4F0rQG0rSA6tsA0bIB0bL////yxqscAAAAk3RSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgnDXAUItvZKBAi6+vpMuf3++wEIAQcEBFn5AgR9UwMEoQLD/AEH4AIdAzha+UMEAQcc9AM4CAFSA9IC+4AEAc8yAwIEBAHOMQOBBLfLMAnFlAJNsa0LAAAAAWJLR0SVCGB6gwAAAAd0SU1FB+EBBBI4BduZ4woAAAF5SURBVDjLY2CAAUYmZgcWRydnVhc2dg4GTMAJlOdydZvs7sHtiU0FSJ7Hy3uyz2RfP24XNl4OLPJ8Xv5A+YBAsAo0M2DyQZMnY1fBL+AgCJXHrkIoWDgEJo9NhUioaBhCHqoiXExcAqZAMkIqckrU5MkoKqSjZeAmyMbIxSIZAFIRMCVOOl4epkAmQSERrwKOJMXkySl4rEhVSkufHDAZtyMzlDPdJweiyiN7UyRLIHsKQj5wMnowSIar5ExJQcjn5qnmqyFHlzqKL7EoQPMlphUaaL7EcGSBZiGKLzFUZGgVFSP5ElNFCVPpFORwhAeVto4uWEGwUJk3alSAVXhIR+tB7ShHTi5QkOIzpUKqEmKCPpODgReaipSUyVWl0tW6GEkWGhRBk2tq6wzrsSVqqPaGRqOmZmMTXWwqwNpbTFvbzMwtsGUMoPb2DqOmTksxK2xZLyhgck1XtzVIuw22zNszeXJvH0i7rR1G9gVlf/v+CRMnWaPYDgA74gwO0j2znAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wMS0wNFQxODo1NjowNSswMTowME2yC4wAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDEtMDRUMTg6NTY6MDUrMDE6MDA877MwAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/lumen/bulmaswatch.min.css"> 
    <link rel="stylesheet" href="https://blog.ucatch.me/css/landing.css">   
    
    
</head>


<body>
    <header> <nav class="nav has-shadow">
<div class="nav-left">
    <a class="nav-item" href="https://blog.ucatch.me/">
        <img src="https://blog.ucatch.me/img/bulma.png" alt="Bulma logo">
    </a>
</div>

<div class="nav-center">
    

    <a class="nav-item" target="blank" href="https://github.com/seanchann">
        <span class="icon">
            <i class="fa fa-github"></i>
          </span>
    </a>
    
    
</div>



<span class="nav-toggle">
        <span></span>
<span></span>
<span></span>
</span>



<div class="nav-right nav-menu" itemscope itemtype="http://schema.org/SiteNavigationElement">
        
        
        <a itemprop="url" class="nav-item is-tab  is-active" href="https://blog.ucatch.me/posts/"><span itemprop="name">Posts</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="https://blog.ucatch.me/blog/"><span itemprop="name">bulma theme</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="https://blog.ucatch.me/"><span itemprop="name">Home</span></a>
        
</div>
</nav> </header>
    <main>

<div class="columns is-fullheight">
    <div class="column">
        <section class="hero is-default is-bold">
            <div class="hero-body">
                <div class="container">
                     <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/golang/reflect/" itemprop="headline">Reflect</a>
    </h1>
    
    <blockquote itemprop="about">reflect rule</blockquote>
    
    <h2 class="content" itemprop="description">
        原文地址
反射规则 反射规则的第一条： 1.反射从interface的value到reflection object 在底层，反射仅仅是一个机制，来检查存储在内部的一个interface变量中的type和value的对。首先，在包reflect中有两种类型我们必须知晓：Type 以及 Value。这两个类型可以让我们访问到interface变量的内容，并且提供了两个简单的函数，reflect.TypeOf以及reflect.ValueOf,通过对这两个函数的调用就可以获取到interface变量的值。（此外，调用reflect.Value也非常容易获取到reflect.Type,但是在概念上Value以及Type是完全不同的）
让我们先开始使用下TypeOf:
package main import ( &quot;fmt&quot; &quot;reflect&quot; ) func main() { var x float64 = 3.4 fmt.Println(&quot;type:&quot;, reflect.TypeOf(x)) }  这个程序会打印：
type: float64  你可能会想知道我们的interface在哪里，因为上面的程序看上去就像是它传递了float64给变量x，而不是一个interface的value，传递给我们的reflect.TypeOf。但是它确实是存在的；在godoc文档中，reflect.TypeOf的签名包含一个空的interface：
// TypeOf returns the reflection Type of the value in the interface{}. func TypeOf(i interface{}) Type  当我们调用reflect.TypeOf(x),x是第一个被存储在空interface中，然后传入作为参数；reflect.TypeOf打开这个空的interface，然后重新获取type的信息。
reflect.Valueof 函数，当然，也重新获取value
var x float64 = 3.4 fmt.Println(&quot;value:&quot;, reflect.ValueOf(x))  程序输出：
value: &lt;float64 Value&gt;  reflect.Type以及reflect.Value两个都提供了很多的方法让我们去检查和操作它们。一个重要的例子是Value有一个Type的方法来返回一个reflect.Value的Type。还有Type以及Value都有一个Kind的方法，这个方法返回一个恒量，这个恒量是按照一定的顺序被存储：Unit，Float64，Slice，等等。另外Value提供了一些方法，这些方法名类似Int以及Float，可以让我们获取在这些对象的内部存储的值：（就像int64以及float64）：
var x float64 = 3.
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/golang/reflect/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/build-system/cmake-external-project/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Title: cmkae-external-project Date: Category: build-system Tags: cmake Author: Seanchann Zhou lang: cn
系统：F22 Cmake: version 3.3.2
ExternalProject_Add 这个函数在cmake 2.8版本以上支持，包含include(ExternalProject)模块即可， 此函数定义了一个编译外部工程的标准方法，当然也可以定制编译流程ExternalProject_Add_Step
ExternalProject_Add函数说明：创建一个针对外部工程的自定义编译目标的过程：下载，更新/patch，configure，build，install， 以及test:
ExternalProject_Add(&lt;name&gt; # Name for custom target [DEPENDS projects...] # Targets on which the project depends [PREFIX dir] # Root dir for entire project [LIST_SEPARATOR sep] # Sep to be replaced by ; in cmd lines [TMP_DIR dir] # Directory to store temporary files [STAMP_DIR dir] # Directory to store step timestamps #--Download step-------------- [DOWNLOAD_NAME fname] # File name to store (if not end of URL) [DOWNLOAD_DIR dir] # Directory to store downloaded files [DOWNLOAD_COMMAND cmd.
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/build-system/cmake-external-project/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-docker-build/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Title: jenkins-docker-build Date: Category: ci-cd Tags: jenkins Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6 Jenkins: ver. 1.609.1
前提条件：
 jenkins的任意node已经安装docker或者docker-build-step插件已经安装  首先，完成docker img编译相关的job有两种方式：
 通过docker-build-setup等类似插件来完成 通过执行脚本来完成，前提是我们的node上已经有docker环境。这个node当然也可以是docker-slave了，这样就会更加的灵活了。  配置docker build step 插件 docker build step的原理是配置一个Docker Remote API，插件通过这个API来进行docker命令的相关操作。
这个插件的配置是在configuration &ndash;&gt;Docker Builder选项中配置一下docker Remote API，比如：http://192.168.60.79:2375
配置完成后，就可以在job的build step里面选择“Execute Docker container”配置相应的命令，来完成你的工作。
配置一个节点 参照标准的节点操作来添加一个有docker环境的node。
节点配置完成后，我们在job的configure制定我们的slave node，那么就可以在这个docker node里面执行我们的docker相关的工作了。
这里你也可以尝试下使用docker in docker的方式。
注意：node上必须有jdk的环境，以及git等相关软件，根据需要自行安装
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-docker-build/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-docker-slave/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Title: jenkins-docker-slave Date: Category: ci-cd Tags: jenkins Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6 Jenkins: ver. 1.609.1
前面的章节已经成功的通过git push触发job，本章我们配置一个job，在docker cloud中执行这些job
前提条件：
 jenkins的docker-plugin插件已经安装  jenkins与docker协同工作的原理是，通过jenkins的docker插件来完成。 首先docker插件负责docker daemon的管理，也就是配置jenkins去连接docker daemon。然后启动一个docker image来完成job。其中，需要注意的是后续我们的job都是完全放在这个启动起来的container里面完成的。因此这个image需要我们自己去根据工程的需要来定义。还有就是master会去连接到这个启动起来的container，是通过ssh来连接的。
配置docker plugin docker 插件提供了可以通过在slave的节点上docker环境，来执行docker的相关操作。
docker环境配置 这里主要就是配置下docker daemon，首先使我们必须安装完成docker。 对docker daemon的配置流程如下：
 /etc/sysconfig/docker配置文件配置OPTIONS=&lsquo;-H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375&rsquo; 。这个配置使能了本地socket以及远端tcp的连接。 如果有防火墙，配置防火墙打开2375端口（no auth）以及2376端口（auth） 重启防火墙以及我们的docker.service  注意-H给出的端口作为http端口，端口+1作为https，这是docker daemon的默认行为
docker jenkins image 配置好docker daemon以后，还需要在docker slave上跑一个docker image给jenkins来使用。后面去配置jenkins的docker cloud的时候就是配置这个image。
这个image的创建可以手动创建或者直接使用docker hub上的evarga/jenkins-slave
evarga/jenkins-slave的使用 这个镜像直接拉取：
docker pull evarga/jenkins-slave  镜像默认的用户名和密码是jenkins:jenkins
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-docker-slave/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-gitlab/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
         Title: jenkins-gitlab Date: Category: ci-cd Tags: jenkins Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6 Jenkins: ver. 1.609.1 gitlab: 6.8.1
本文主要针对jenkins与gitlab的整合进行说明。
前提条件：
 jenkins的 git、git-client、gitlab-hook插件已经安装 gitlab已经安装成功  jenkins的配置 create jobs 创建一个任务其中需要注意的地方是，配置下自己的git ssh key
Source Code Management 此项配置主要是对我们代码库的配置，我们配置为git，然后给出我们的git 仓库的url，切记这里需要配置下证书，我们选择的方式ssh key的方式
Build Triggers的配置  Poll SCM：也就是给一个周期来自动的拉取整个的workspace，如果要避免这样做，那么就给出一个push的触发。我们这里的schedule什么都不配置。  gitlab webhook的配置 登录到gitlab管理页面，给git-test工程增加一个push event的hook，url填写：
http://yourjenkinshome/git/notifyCommit?url=git@192.168.60.18:xqzhou/git-test.git  配置完成后，我们在gitlab上点击testlink，触发到jenkins成功，表示我们的配置是ok的。
gitlab push event的额外配置 在我使用的gitlab的版本上，当git客户端去git push的时候，不能触发hook，必须在gitlab的每个仓库中的hooks目录增加一个post-receive的脚本：
#!/bin/bash curl http://yourjenkins/git/notifyCommit?url=your-gitrepos-url  这样配置以后，才可以正常的在jenkins中触发我们的job。
并且这个触发可以支持分支的build，需要在jenkins的job中增加需要编译的分支。git插件提供了一些有用的变量，可以在我们的脚本中使用：
 $GIT_BRANCH：返回分支名 $GIT_COMMIT：git的commit id  
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-gitlab/" itemprop="url">Read More…</a>
</div> 
                </div>
                <br>
                <div class="container">
                    <div class="tabs">
    <p class="control">
        
    </p>
    <p class="control">
        <a class="button">
           Page 1 of 4
        </a>
    </p>
    <p class="control">
        
        <a class="button is-primary" href="https://blog.ucatch.me/posts/page/2/">
            <span class=" icon is-small ">
        <i class="fa fa-angle-double-right "></i>
      </span>
            <span>Next</span>
        </a>
        
    </p>
</div> 
                </div>
            </div>
        </section>
    </div>

</div>
</main>
    <footer> 
  
<div class="hero-foot">
    <div class="container">
        <div class="tabs is-centered">
            <ul>
                This page was generated using this template
                <li> <a class="button button is-link" class="link" target="_blank" rel="noopener" href="https://jeblister.github.io/bulma/">Bulma</a></li>
                using 
                <li> <a class="button button is-link" target="_blank" rel="noopener" href="https://gohugo.io/">Hugo</a></li>
                and build by
                <strong>&nbsp;seanchann.zhou</strong>
                <li> <a class="icon" href="https://github.com/jeblister/bulma">
              
                    <i class="fa fa-github"></i>
                </a></li>
            </ul>
            
        </div>
    </div>
</div>
 
</footer>

    <script async type="text/javascript" src="https://blog.ucatch.me/js/bulma.js"></script>
    <script async type="text/javascript"  src="https://blog.ucatch.me/js/clipboard.min.js"></script>
    <script async type="text/javascript"  src="https://blog.ucatch.me/js/clip.js"></script>
</body>

</html>