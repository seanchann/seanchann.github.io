<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta name="generator" content="Hugo 0.26-DEV" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Posts | seanchann</title>

     
      
    
    
    
      <meta name="robots" content="noindex">
    
    
    

  <meta name="author" content="">

 
    <meta property="og:title" content="Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://blog.ucatch.me/posts/" />













 
    



 
    
     
     
    
    <link href="https://blog.ucatch.me/posts/index.xml" rel="alternate" type="application/rss+xml" title="seanchann" /> 
    
    <link rel="canonical" href="https://blog.ucatch.me/posts/">   <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABwlBMVEUAAAA/3MUK07UJ0rRk6NkC0rMAw5sAx6Ic1rs/3MYAlU0E0rQAhjMAyKIAiTkM07UJ07UAhC8m2L4o2L5O4Msn2L4AzKoAzq0128Mo2b8F0rQE0rMu2cAt2cAA0bI228MA0LAAy6kr2b8Q1LcF0rMH0rUAxp4t2b8c1ros2b8P1LcAzKsAzq4528Q02sIM07YAfyg93cUD0rMA0LEA0bFK4c0M1LcL07Uv2sEAzawY1rlJ4c0w2sEAzKkY1rqr+PQN07Yj170G0rQI07UF0bMt2cAF0rMC0bIL07UF0bMs2cAF0rMA0bIC0bIL07UF0rMA0bIA0bIA0bIO1LYr2b8N07Yp2L4F0rMF0rQJ07UA0bIC0bMA0bIH0rQK07UD0bMA0LAF0rMAyqYE0rMA0bIS1Lg228ID0bMM07YS1LcI07QL07UJ07UC0bMM07YG0rMS1Lc328IR1LcC0bIK07UM07Yo2L4P1LcL07UD0rMD0rMD0rMB0bIH0rQ23MMQ1LcD0rMN1LYB0LAJ0rQ33MMG0bMP1bgD0rMN07YH0rQH0rQ33MQF0rMD0rMN1LYo2L4F0rQG0rSA6tsA0bIB0bL////yxqscAAAAk3RSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgnDXAUItvZKBAi6+vpMuf3++wEIAQcEBFn5AgR9UwMEoQLD/AEH4AIdAzha+UMEAQcc9AM4CAFSA9IC+4AEAc8yAwIEBAHOMQOBBLfLMAnFlAJNsa0LAAAAAWJLR0SVCGB6gwAAAAd0SU1FB+EBBBI4BduZ4woAAAF5SURBVDjLY2CAAUYmZgcWRydnVhc2dg4GTMAJlOdydZvs7sHtiU0FSJ7Hy3uyz2RfP24XNl4OLPJ8Xv5A+YBAsAo0M2DyQZMnY1fBL+AgCJXHrkIoWDgEJo9NhUioaBhCHqoiXExcAqZAMkIqckrU5MkoKqSjZeAmyMbIxSIZAFIRMCVOOl4epkAmQSERrwKOJMXkySl4rEhVSkufHDAZtyMzlDPdJweiyiN7UyRLIHsKQj5wMnowSIar5ExJQcjn5qnmqyFHlzqKL7EoQPMlphUaaL7EcGSBZiGKLzFUZGgVFSP5ElNFCVPpFORwhAeVto4uWEGwUJk3alSAVXhIR+tB7ShHTi5QkOIzpUKqEmKCPpODgReaipSUyVWl0tW6GEkWGhRBk2tq6wzrsSVqqPaGRqOmZmMTXWwqwNpbTFvbzMwtsGUMoPb2DqOmTksxK2xZLyhgck1XtzVIuw22zNszeXJvH0i7rR1G9gVlf/v+CRMnWaPYDgA74gwO0j2znAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wMS0wNFQxODo1NjowNSswMTowME2yC4wAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDEtMDRUMTg6NTY6MDUrMDE6MDA877MwAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/lumen/bulmaswatch.min.css"> 
    <link rel="stylesheet" href="https://blog.ucatch.me/css/landing.css">   
    
    
</head>


<body>
    <header> <nav class="nav has-shadow">
<div class="nav-left">
    <a class="nav-item" href="https://blog.ucatch.me/">
        <img src="https://blog.ucatch.me/img/bulma.png" alt="Bulma logo">
    </a>
</div>

<div class="nav-center">
    

    <a class="nav-item" target="blank" href="https://github.com/seanchann">
        <span class="icon">
            <i class="fa fa-github"></i>
          </span>
    </a>
    
    
</div>



<span class="nav-toggle">
        <span></span>
<span></span>
<span></span>
</span>



<div class="nav-right nav-menu" itemscope itemtype="http://schema.org/SiteNavigationElement">
        
        
        <a itemprop="url" class="nav-item is-tab  is-active" href="https://blog.ucatch.me/posts/"><span itemprop="name">Posts</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="https://blog.ucatch.me/blog/"><span itemprop="name">bulma theme</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="https://blog.ucatch.me/"><span itemprop="name">Home</span></a>
        
</div>
</nav> </header>
    <main>

<div class="columns is-fullheight">
    <div class="column">
        <section class="hero is-default is-bold">
            <div class="hero-body">
                <div class="container">
                     <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-install/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Title: jenkins-install Date: Category: ci-cd Tags: jenkins Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6 Jenkins: ver. 1.609.1
安装 对于jenkins的安装，直接使用dockerhub上的镜像进行构建。直接docker pull jenkins就可以了。
jenkins的插件安装 对于插件安装，有两种方式，通过页面安装或者直接安装在docker image里面。 一般来说，我们采用后一种方式来安装。避免插件的反复安装。
重新编译一个docker image，Dockerfile片段：
FROM jenkins COPY plugins.txt /usr/share/jenkins/plugins.txt RUN /usr/local/bin/plugins.sh /usr/share/jenkins/plugins.txt  复制了一个plugins.txt文件，这个文件的内容如下：
git:latest git-client:latest gitlab-hook:latest  上面的这些就是我们要安装的插件。
注意：在安装插件的时候，保证插件依赖的插件也被正确的安装，否则这些插件是不可用的
插件依赖可参考这里
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-install/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-problem/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
         Title: jenkins-docker Date: Category: ci-cd Tags: jenkins Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6 Jenkins: ver. 1.609.1
jenkins在使用中碰到的问题的汇总，以备查阅。
jenkins (pending—Waiting for next available executor) 检查下节点的状态，当master node如果disk不足，就会自动的把master node切换到离线，如果有job被触发，那么将此job置为pending。
Disk space is too low. Only 0.519GB left on /tmp 在docker镜像里，/tmp分区确实很小，因此，总是会把master节点置为offline，我们在启动的时候传入下面的环境变量来修改tmpdir：
JAVA_OPTS=&quot;-Djava.io.tmpdir=$JENKINS_HOME/tmp&quot;  
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-problem/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-security/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Title: jenkins-security Date: Category: ci-cd Tags: jenkins Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6 Jenkins: ver. 1.609.1
配置说明 jenkins的安全配置说明在主页面的Configure Global Security的菜单中。它的安全和访问控制主要是两部分：安全域和鉴权策略。
Security Realm配置 在这个配置中，包含了下列的子选项，我们一一进行分析和说明：
Delegate to servlet container 使用servlet container对用户授权。这个是有历史的，从1.163版本就支持了这个功能。它主要用于下面的情节： * 从1.164就开始使用jenkins，并且不想改变当前的状态。 * 你已经配置了servlet container的鉴权，并且希望jenkins直接使用它
Jenkins&rsquo;s own user database 使用jenkins自己的用户列表来授权。这个适合小型范围的配置当你并没有任何的用户数据库的时候，当有大量用户的时候，这种策略是不合适的。在这种策略下，如果允许任何人通过注册可以获取到jenkins的权限的话，可以勾上“Allow user to sign up”。这样非用户可以自己通过“sign up”来注册使用jenkins。如果不允许，那么此时想添加新的用户，只能由注已经注册用户通过Manage Jenkins&ndash;&gt; Manage Users进入User Database界面，来创建用户。
LDAP 顾名思义连接到你已经有的ldap服务器来配置
Unix user/group database 如果安装的机器是unix机器，可以使用unix的账户信息来登录到jenkins。
Authorization 配置 鉴权策略的话，也有几个子选项。
Anyone can do anything 任何人都可以在系统上进行任何的操作。不推荐的方式
Legacy mode 这种策略比较极端：admin用户拥有所有权限，其他用户只读。
Logged-in users can do anything 可登录的用户拥有所有操作的权限。
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/ci-cd/jenkins-security/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/loadbalancer/lvs-install/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
         Title: lvs-install Date: Category: loadbalancer Tags: loadbalancer Author: Seanchann Zhou lang: cn status: draft
系统：CentOS7 + docker 1.6
本文主要是对lvs软件在docker中的安装过程做了一个总结，物理裸机的安装方式是一致的。
技术名词  piranha：提供配置接口来配置lvs,这个工程现在在rel7中已经被haproxy+keepalive代替，建议就不要用了，基本没人维护了。 ipvs：（IP Virtual Server）ip虚拟服务器，是在linux下实现负载均衡的技术。 ipvsadm：顾名思义，这个是一个软件包，就是用来让管理员配置ipvs的。注意，我们可以通过ipvsadm或者piranha-gui来配置ipvs VIP：虚拟ip地址，配置在我们的负载均衡服务器上。 RIP：真实的服务器IP地址，也就是负载均衡服务器后端的真实服务器地址。  dockerfile with lvs dockerfile我们基于centos7的官方镜像来制作，lvs本身已经集成到了kernel中，因此我们主要是安装user namespace中的一个配置软件：ipvsadm
dockerfile文件中的代码片段：
  
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/loadbalancer/lvs-install/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/mongodb/mongodb-go-concurrently/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Title: mongodb在Go中的并发 Date: Category: mongodb Tags: mongodb Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6
mongodb版本： 3.0.2
原文的地址
pla，pla的一堆作者的铺垫介绍略过，但是还是感谢下作者。
介绍 mongodb支持很多不同的编程语言，感谢编写驱动程序的人员。一个mongoDB的go语言的驱动叫做mgo。这个驱动是由Gustavo Niemeyer和一些的MongoDB公司的同事一起开发的。团队的负责人是Gustavo以及Steve Francia，他们在2014年的“GopherCon”上分享了“使用Go语言在mongodb中存储数据”。分享内容描述了mgo驱动如何使得mongodb和go更好的协同工作去构建高度可扩展的软件。
MongoDB和Go让你可以构建可扩展的软件在很多不同的操作系统以及架构上，无需安装框架或者其他的运行时依赖。Go程序是本地的二进制文件并且Go工具正在不断的提升它的运行效率，它的效率是可以比肩C编写的程序的。但是，这并不意味着如果用Go写程序就很复杂和繁琐，就像C程序那样的。使用Go的情况是，编写代码的速度会很快，并且很有乐趣。
在这篇文章中，我将告诉你如何编写一个Go程序使用mgo驱动来连接以及进行mongo数据库的查询。我会给出一些示例代码，这里可能在新版本的mongodb和Go一同工作上会有一点困惑，但是我会一一解释的。
示例程序 示例程序连接到一个公共的mongodb数据库。如果你有Go和Bazaar在你的机器上安装了，你也可以连接到我的数据库上。这个程序非常的简单 - 它运行了10个goroutines，它们分别会从goinggo数据库中的buoy_stations 集合中查询记录。这些记录被反射到本地的Go types并且每一个goroutine 日志输出返回的文档的数目：
// This program provides a sample application for using MongoDB with // the mgo driver. package main import ( &quot;labix.org/v2/mgo&quot; &quot;labix.org/v2/mgo/bson&quot; &quot;log&quot; &quot;sync&quot; &quot;time&quot; ) const ( MongoDBHosts = &quot;ds035428.mongolab.com:35428&quot; AuthDatabase = &quot;goinggo&quot; AuthUserName = &quot;guest&quot; AuthPassword = &quot;welcome&quot; TestDatabase = &quot;goinggo&quot; ) type ( // BuoyCondition contains information for an individual station.
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/mongodb/mongodb-go-concurrently/" itemprop="url">Read More…</a>
</div> 
                </div>
                <br>
                <div class="container">
                    <div class="tabs">
    <p class="control">
        
        <a class="button is-primary" href="https://blog.ucatch.me/posts/">
            <span class="icon is-small">
        <i class="fa fa-angle-double-left"></i>
      </span>
            <span>Previous</span>
        </a>
        
    </p>
    <p class="control">
        <a class="button">
           Page 2 of 4
        </a>
    </p>
    <p class="control">
        
        <a class="button is-primary" href="https://blog.ucatch.me/posts/page/3/">
            <span class=" icon is-small ">
        <i class="fa fa-angle-double-right "></i>
      </span>
            <span>Next</span>
        </a>
        
    </p>
</div> 
                </div>
            </div>
        </section>
    </div>

</div>
</main>
    <footer> 
  
<div class="hero-foot">
    <div class="container">
        <div class="tabs is-centered">
            <ul>
                This page was generated using this template
                <li> <a class="button button is-link" class="link" target="_blank" rel="noopener" href="https://jeblister.github.io/bulma/">Bulma</a></li>
                using 
                <li> <a class="button button is-link" target="_blank" rel="noopener" href="https://gohugo.io/">Hugo</a></li>
                and build by
                <strong>&nbsp;seanchann.zhou</strong>
                <li> <a class="icon" href="https://github.com/jeblister/bulma">
              
                    <i class="fa fa-github"></i>
                </a></li>
            </ul>
            
        </div>
    </div>
</div>
 
</footer>

    <script async type="text/javascript" src="https://blog.ucatch.me/js/bulma.js"></script>
    <script async type="text/javascript"  src="https://blog.ucatch.me/js/clipboard.min.js"></script>
    <script async type="text/javascript"  src="https://blog.ucatch.me/js/clip.js"></script>
</body>

</html>