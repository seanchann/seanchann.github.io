<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta name="generator" content="Hugo 0.26-DEV" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Posts | seanchann</title>

     
      
    
    
    
      <meta name="robots" content="noindex">
    
    
    

  <meta name="author" content="">

 
    <meta property="og:title" content="Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://blog.ucatch.me/posts/" />













 
    



 
    
     
     
    
    <link href="https://blog.ucatch.me/posts/index.xml" rel="alternate" type="application/rss+xml" title="seanchann" /> 
    
    <link rel="canonical" href="https://blog.ucatch.me/posts/">   <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABwlBMVEUAAAA/3MUK07UJ0rRk6NkC0rMAw5sAx6Ic1rs/3MYAlU0E0rQAhjMAyKIAiTkM07UJ07UAhC8m2L4o2L5O4Msn2L4AzKoAzq0128Mo2b8F0rQE0rMu2cAt2cAA0bI228MA0LAAy6kr2b8Q1LcF0rMH0rUAxp4t2b8c1ros2b8P1LcAzKsAzq4528Q02sIM07YAfyg93cUD0rMA0LEA0bFK4c0M1LcL07Uv2sEAzawY1rlJ4c0w2sEAzKkY1rqr+PQN07Yj170G0rQI07UF0bMt2cAF0rMC0bIL07UF0bMs2cAF0rMA0bIC0bIL07UF0rMA0bIA0bIA0bIO1LYr2b8N07Yp2L4F0rMF0rQJ07UA0bIC0bMA0bIH0rQK07UD0bMA0LAF0rMAyqYE0rMA0bIS1Lg228ID0bMM07YS1LcI07QL07UJ07UC0bMM07YG0rMS1Lc328IR1LcC0bIK07UM07Yo2L4P1LcL07UD0rMD0rMD0rMB0bIH0rQ23MMQ1LcD0rMN1LYB0LAJ0rQ33MMG0bMP1bgD0rMN07YH0rQH0rQ33MQF0rMD0rMN1LYo2L4F0rQG0rSA6tsA0bIB0bL////yxqscAAAAk3RSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgnDXAUItvZKBAi6+vpMuf3++wEIAQcEBFn5AgR9UwMEoQLD/AEH4AIdAzha+UMEAQcc9AM4CAFSA9IC+4AEAc8yAwIEBAHOMQOBBLfLMAnFlAJNsa0LAAAAAWJLR0SVCGB6gwAAAAd0SU1FB+EBBBI4BduZ4woAAAF5SURBVDjLY2CAAUYmZgcWRydnVhc2dg4GTMAJlOdydZvs7sHtiU0FSJ7Hy3uyz2RfP24XNl4OLPJ8Xv5A+YBAsAo0M2DyQZMnY1fBL+AgCJXHrkIoWDgEJo9NhUioaBhCHqoiXExcAqZAMkIqckrU5MkoKqSjZeAmyMbIxSIZAFIRMCVOOl4epkAmQSERrwKOJMXkySl4rEhVSkufHDAZtyMzlDPdJweiyiN7UyRLIHsKQj5wMnowSIar5ExJQcjn5qnmqyFHlzqKL7EoQPMlphUaaL7EcGSBZiGKLzFUZGgVFSP5ElNFCVPpFORwhAeVto4uWEGwUJk3alSAVXhIR+tB7ShHTi5QkOIzpUKqEmKCPpODgReaipSUyVWl0tW6GEkWGhRBk2tq6wzrsSVqqPaGRqOmZmMTXWwqwNpbTFvbzMwtsGUMoPb2DqOmTksxK2xZLyhgck1XtzVIuw22zNszeXJvH0i7rR1G9gVlf/v+CRMnWaPYDgA74gwO0j2znAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wMS0wNFQxODo1NjowNSswMTowME2yC4wAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDEtMDRUMTg6NTY6MDUrMDE6MDA877MwAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/lumen/bulmaswatch.min.css"> 
    <link rel="stylesheet" href="https://blog.ucatch.me/css/landing.css">   
    
    
</head>


<body>
    <header> <nav class="nav has-shadow">
<div class="nav-left">
    <a class="nav-item" href="https://blog.ucatch.me/">
        <img src="https://blog.ucatch.me/img/bulma.png" alt="Bulma logo">
    </a>
</div>

<div class="nav-center">
    

    <a class="nav-item" target="blank" href="https://github.com/seanchann">
        <span class="icon">
            <i class="fa fa-github"></i>
          </span>
    </a>
    
    
</div>



<span class="nav-toggle">
        <span></span>
<span></span>
<span></span>
</span>



<div class="nav-right nav-menu" itemscope itemtype="http://schema.org/SiteNavigationElement">
        
        
        <a itemprop="url" class="nav-item is-tab  is-active" href="https://blog.ucatch.me/posts/"><span itemprop="name">Posts</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="https://blog.ucatch.me/blog/"><span itemprop="name">bulma theme</span></a>
        
        <a itemprop="url" class="nav-item is-tab " href="https://blog.ucatch.me/"><span itemprop="name">Home</span></a>
        
</div>
</nav> </header>
    <main>

<div class="columns is-fullheight">
    <div class="column">
        <section class="hero is-default is-bold">
            <div class="hero-body">
                <div class="container">
                     <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/mongodb/mongodb-index/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Title: mongodb-index Date: Category: mongodb Tags: mongodb Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6
mongodb版本： 3.0.2
mongo 的索引可以加快数据的查询，并且可以有效的避免重复键值对。
mongo的索引类型 MongoDB提供了不同类型的indexes，这些indexes针对不同的目的以及各种不同类型的内容。
 Single Field Indexes ：单字段索引仅包含集合中相应文档的单个字段中的数据。MongoDB 支持在文档根里的单字段索引，也支持在文档的子文档（需要理解为嵌套的文档）的中的字段的索引。 Compound Indexes：复合索引包含了在集合中的文档的多个字段。 Multikey Indexes：Multikey 指的是将索引建立在了一个数组的字段上，为在数组中的每个值都创建一个index key。 Geospatial Indexes and Queries：地理空间索引作为 GeoJSON 对象或遗留的坐标对存储的数据支持基于位置的搜索。 Text Indexes：text的索引支持对文档中的字符串内容的查找。 Text indexes support search of string content in documents. Hashed Index：哈希的索引维护条目的索引字段的值的哈希值，主要用于与分片集群支持散列的碎片的密钥。  Index Properties （属性） 你可以在你构建索引的时候，给出这些属性值。
 TTL Indexes：TTL索引用于TTL的集合，它指示了在一定时间后数据的过期。 Unique Indexes：唯一索引会导致 MongoDB 拒绝包含索引字段的重复值的所有文档。 Sparse Indexes：sparse 属性，会在索引文档的时候，不去索引不包含索引字段的文档。  创建一个唯一的索引 db.
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/mongodb/mongodb-index/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/mongodb/mongodb-install/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Title: mongodb-install Date: Category: mongodb Tags: mongodb Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6
mongodb版本： 3.0.2
本文的安装是采用docker的方式，而不是在os上安装package的方式。 package的安装方式
在开始前，假定用户已经完成了基础环境的配置，这里主要是指docker的运行环境
安装 运行一个mongodb docker hub上官方的mongodb image，我们直接使用此image来运行mongodb：
docker pull mongo  创建一个volume容器，保存mongo的数据以及配置：
docker create -v /yourdir/mongo/data/db:/data/db -v /yourdir/mongo/conf/:/conf/ --name=mongo-dv mongo  run mongodb with volume 直接指定绑定host上的文件夹：
docker create --volumes-from=mongo-dv --name mongodb -d mongo  自定义参数启动 docker hub上提供的官方镜像支持自定义参数启动mongodb：
docker run -p 27017:27017 --name=mongodb -d mongo --auth  如上所示，我们传入了&ndash;auth给run命令做为参数，相当于我们执行mongod &ndash;auth
截取一段代码看看：
#!/bin/bash set -e if [ &quot;${1:0:1}&quot; = '-' ]; then set -- mongod &quot;$@&quot; fi if [ &quot;$1&quot; = 'mongod' ]; then chown -R mongodb /data/db numa='numactl --interleave=all' exec gosu mongodb &quot;$@&quot; fi exec &quot;$@&quot;  此段脚本的流程如下：
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/mongodb/mongodb-install/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/mongodb/mongodb-problems-summary/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Title: mongodb-Problems-Summary Date: Category: mongodb Tags: mongodb Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6
mongodb版本： 3.0.2
WARNING:/sys/kernel/mm/transparent_hugepage/enabled or /sys/kernel/mm/transparent_hugepage/defrag is &lsquo;always&rsquo;. 这个问题的原因是由于内核的某些参数的配置造成的mongodb产生了警告，基于docker环境，在docker运行的host主机上： 1. echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled 2. echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag or 1. echo never | sudo tee /sys/kernel/mm/transparent_hugepage/enabled 2. echo never | sudo tee /sys/kernel/mm/transparent_hugepage/defrag  run command with db 从mongo shell执行db.runCommand()，需要添加下面的用户以及权限才能执行。
db.createUser( { user: &quot;admin&quot;, pwd: &quot;password&quot;, roles: [ { role: &quot;root&quot;, db: &quot;admin&quot; } ] } ); exit;  db.
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/mongodb/mongodb-problems-summary/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/mongodb/mongodb-read/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Tags: mongodb Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6
mongodb版本： 3.0.2
mongodb与读操作相关的内容，比如find以及query操作
查询和Projection的操作选项 查询选择器 比较  $eq : 匹配到所有的与给定的值相等的条目 $gt : 匹配到所有的大于给定的值的条目 $gte : 匹配到所有的大于或者等于给定的值的条目 $lt : 匹配所有的小于给定值的条目 $lte : 匹配所有的小于或者等于给定值的条目 $ne : 匹配所有的不等于给定值的条目 $in : 匹配给定的值在一个数组中存在的条目 $nin : 匹配给定的值不在一个数组中存在的条目  逻辑操作  $or : 逻辑或操作 $and : 逻辑与操作 $not : 逻辑非的操作 $nor : 逻辑异或的操作  Element  $exists : 匹配所有的文档存在给定的字段的条目 $type : 匹配如果字段是给定的类型的文档条目  Evaluation  $mod : 针对字段的值进行mod的操作 $regex : 返回与正则表达式匹配的文档 $text : 处理text的查找 $where : 返回匹配JavaScript表达式的文档  Geospatial  $geoWithin : Selects geometries within a bounding GeoJSON geometry.
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/mongodb/mongodb-read/" itemprop="url">Read More…</a>
</div>  <div class="column is-full-desktop" itemscope itemtype="http://schema.org/CreativeWork">
    <h1 class="blog-timestamp">
        
    </h1>
    <h1 class="title">
        <a href="https://blog.ucatch.me/posts/mongodb/mongodb-shell-cmd/" itemprop="headline"></a>
    </h1>
    
    <h2 class="content" itemprop="description">
        Title: mongodb-shell-cmd Date: Category: mongodb Tags: mongodb Author: Seanchann Zhou lang: cn
系统：CentOS7 + docker 1.6
mongodb版本： 3.0.2 mongo shell版本：3.0.4
Object Object.bsonsize() 这个命令返回文档的bson的大小，单位是字节。
例子：
db.test.status Object.bsonsize(db.test.findOne({bar2:&quot;baz&quot;}))  可以看下是不是跟总和一致。这里一定要使用findOne，find返回的是CURSOR的size，而不是当前文档的。
    </h2>
</div>
<div class="button">
    <a href="https://blog.ucatch.me/posts/mongodb/mongodb-shell-cmd/" itemprop="url">Read More…</a>
</div> 
                </div>
                <br>
                <div class="container">
                    <div class="tabs">
    <p class="control">
        
        <a class="button is-primary" href="https://blog.ucatch.me/posts/page/2/">
            <span class="icon is-small">
        <i class="fa fa-angle-double-left"></i>
      </span>
            <span>Previous</span>
        </a>
        
    </p>
    <p class="control">
        <a class="button">
           Page 3 of 4
        </a>
    </p>
    <p class="control">
        
        <a class="button is-primary" href="https://blog.ucatch.me/posts/page/4/">
            <span class=" icon is-small ">
        <i class="fa fa-angle-double-right "></i>
      </span>
            <span>Next</span>
        </a>
        
    </p>
</div> 
                </div>
            </div>
        </section>
    </div>

</div>
</main>
    <footer> 
  
<div class="hero-foot">
    <div class="container">
        <div class="tabs is-centered">
            <ul>
                This page was generated using this template
                <li> <a class="button button is-link" class="link" target="_blank" rel="noopener" href="https://jeblister.github.io/bulma/">Bulma</a></li>
                using 
                <li> <a class="button button is-link" target="_blank" rel="noopener" href="https://gohugo.io/">Hugo</a></li>
                and build by
                <strong>&nbsp;seanchann.zhou</strong>
                <li> <a class="icon" href="https://github.com/jeblister/bulma">
              
                    <i class="fa fa-github"></i>
                </a></li>
            </ul>
            
        </div>
    </div>
</div>
 
</footer>

    <script async type="text/javascript" src="https://blog.ucatch.me/js/bulma.js"></script>
    <script async type="text/javascript"  src="https://blog.ucatch.me/js/clipboard.min.js"></script>
    <script async type="text/javascript"  src="https://blog.ucatch.me/js/clip.js"></script>
</body>

</html>